<mujoco>
  <compiler autolimits="true"/>
  <default>
    <site type="sphere" rgba="1 0 0 1" size="0.005"/>
    <tendon rgba="0 1 0 1"/>
  </default>
  <visual>
    <headlight diffuse=".7 .7 .7"/>
  </visual>

  <worldbody>
    <body name="rotor_1_up" pos="-0.535 -0.755 1.309" euler="90 45 0">
      <geom name="rotor_1_up" type="cylinder" size=".025 .05"/>
      <site name="top_main_site_1" pos="-0.025 0.00001 0" />
      <site name="top_sidesite_1" pos="0 0.05 0" />

      <body name="rotor_1_down" pos="0 -1.309 0" euler="0 0 0">
        <geom name="rotor_1_down" type="cylinder" size=".025 .05"/>
        <site name="bot_main_site_1" pos="0.025 -0.00001 0" />
        <site name="bot_sidesite_1" pos="0 -0.05 0" />

        <body name="slider_1" pos="-2 0 0">
          <inertial pos="0 0 0" mass="2" diaginertia="0.0001 0.0001 0.0001" />
          <joint name="slider_1" type="slide" axis="-1 0 0" damping="5"/>
          <geom type="box" size="0.01 0.01 0.01" />
          <site name="slider_1" pos="0.01 0 0"/>
        </body>
      </body>
    </body>

    <body name="rotor_2_up" pos="0.755 -0.525 1.309" euler="90 135 0">
      <geom name="rotor_2_up" type="cylinder" size=".025 .05"/>
      <site name="top_main_site_2" pos="-0.025 0.00001 0" />
      <site name="top_sidesite_2" pos="0 0.05 0" />

      <body name="rotor_2_down" pos="0 -1.309 0" euler="0 0 0">
        <geom name="rotor_2_down" type="cylinder" size=".025 .05"/>
        <site name="bot_main_site_2" pos="0.025 -0.00001 0" />
        <site name="bot_sidesite_2" pos="0 -0.05 0" />

        <body name="slider_2" pos="-2 0 0">
          <inertial pos="0 0 0" mass="2" diaginertia="0.0001 0.0001 0.0001" />
          <joint name="slider_2" type="slide" axis="-1 0 0" damping="5"/>
          <geom type="box" size="0.01 0.01 0.01" />
          <site name="slider_2" pos="0.01 0 0"/>
        </body>
      </body>
    </body>

    <body name="rotor_3_up" pos="0.535 0.755 1.309" euler="90 -135 0">
      <geom name="rotor_3_up" type="cylinder" size=".025 .05"/>
      <site name="top_main_site_3" pos="-0.025 0.00001 0" />
      <site name="top_sidesite_3" pos="0 0.05 0" />

      <body name="rotor_3_down" pos="0 -1.309 0" euler="0 0 0">
        <geom name="rotor_3_down" type="cylinder" size=".025 .05"/>
        <site name="bot_main_site_3" pos="0.025 -0.00001 0" />
        <site name="bot_sidesite_3" pos="0 -0.05 0" />

        <body name="slider_3" pos="-2 0 0">
          <inertial pos="0 0 0" mass="2" diaginertia="0.0001 0.0001 0.0001" />
          <joint name="slider_3" type="slide" axis="-1 0 0" damping="5"/>
          <geom type="box" size="0.01 0.01 0.01" />
          <site name="slider_3" pos="0.01 0 0"/>
        </body>
      </body>
    </body>

    <body name="rotor_4_up" pos="-0.755 0.525 1.309" euler="90  -45 0">
      <geom name="rotor_4_up" type="cylinder" size=".025 .05"/>
      <site name="top_main_site_4" pos="-0.025 0.00001 0" />
      <site name="top_sidesite_4" pos="0 0.05 0" />

      <body name="rotor_4_down" pos="0 -1.309 0" euler="0 0 0">
        <geom name="rotor_4_down" type="cylinder" size=".025 .05"/>
        <site name="bot_main_site_4" pos="0.025 -0.00001 0" />
        <site name="bot_sidesite_4" pos="0 -0.05 0" />

        <body name="slider_4" pos="-2 0 0">
          <inertial pos="0 0 0" mass="2" diaginertia="0.0001 0.0001 0.0001" />
          <joint name="slider_4" type="slide" axis="-1 0 0" damping="5"/>
          <geom type="box" size="0.01 0.01 0.01" />
          <site name="slider_4" pos="0.01 0 0"/>
        </body>
      </body>
    </body>

    <!-- Floor -->
    <geom name="floor" type="plane" size="5 5 0.1" pos="0 0 -0.1" rgba="0.8 0.8 0.8 1"/>
    
    <!-- Red square object on floor -->
    <body name="target_object" pos="0.5 0.5 0">
      <geom type="box" size="0.1 0.1 0.01" rgba="1 0 0 1"/>
    </body>

    <!-- End-effector -->
    <body name="box" pos="0 0 1.309">
    <freejoint />
    <inertial pos="0 0 0" mass="1" diaginertia="0.15 0.15 0.15"/>
    <geom name="box" type="box" size="0.05 0.05 0.05" />
    <site name="topcenter" pos="0 0 0.05" />
    <site name="corner_1" pos="-0.05  -0.05 0.05" />
    <site name="corner_2" pos=" 0.05  -0.05 0.05" />
    <site name="corner_3" pos=" 0.05 0.05 0.05" />
    <site name="corner_4" pos="-0.05 0.05 0.05" />
    
    <!-- Camera attached to end effector looking downward -->
    <body name="camera_body" pos="0 0 -0.1" euler="0 0 0">
        <camera name="ee_camera" mode="fixed" fovy="60"/>
    </body>
    </body>
    
    <!-- Mount at your end-effector body -->
    <body name="ee_platform" pos="0 0 1.309">
      <!-- Yaw DOF for the tool -->
      <joint name="ee_yaw" type="hinge" axis="0 0 1" limited="true" range="-3.1416 3.1416" damping="0.1"/>

      <body name="tool" pos="0 0 0.0">
        <geom name="tool_base" type="box" size=".03 .03 .02" rgba="0.25 0.25 0.25 1"/>

        <!-- Left finger -->
        <body name="finger_left" pos="0.02 0 0">
          <joint name="finger_l" type="slide" axis="1 0 0" limited="true" range="0 .03" damping="1.0"/>
          <geom name="finger_l_geom" type="box" size=".01 .005 .02" rgba="0.8 0.1 0.1 1"/>
        </body>

        <!-- Right finger -->
        <body name="finger_right" pos="-0.02 0 0">
          <joint name="finger_r" type="slide" axis="-1 0 0" limited="true" range="0 .03" damping="1.0"/>
          <geom name="finger_r_geom" type="box" size=".01 .005 .02" rgba="0.8 0.1 0.1 1"/>
        </body>
      </body>
    </body>

  </worldbody>

  <equality>
    <!-- Enforce q_r = q_l  (10 poly coefficients: a0..a9). q2 = a0 + a1*q1 + ... -->
    <joint joint1="finger_l" joint2="finger_r" polycoef="0 1 0 0 0"/>
  </equality>

  <tendon>
    <spatial name="rope_1" limited="true" range="0 4.235" stiffness="0" damping="0" >
      <site site="topcenter" />
      <geom geom="rotor_1_up" sidesite="top_sidesite_1" />
      <site site="top_main_site_1" />
      <site site="bot_main_site_1" />
      <geom geom="rotor_1_down" sidesite="bot_sidesite_1" />
      <site site="slider_1" />
    </spatial>

    <spatial name="rope_2" limited="true" range="0 4.235" stiffness="0" damping="0" >
      <site site="topcenter" />
      <geom geom="rotor_2_up" sidesite="top_sidesite_2" />
      <site site="top_main_site_2" />
      <site site="bot_main_site_2" />
      <geom geom="rotor_2_down" sidesite="bot_sidesite_2" />
      <site site="slider_2" />
    </spatial>

    <spatial name="rope_3" limited="true" range="0 4.235" stiffness="0" damping="0" >
      <site site="topcenter" />
      <geom geom="rotor_3_up" sidesite="top_sidesite_3" />
      <site site="top_main_site_3" />
      <site site="bot_main_site_3" />
      <geom geom="rotor_3_down" sidesite="bot_sidesite_3" />
      <site site="slider_3" />
    </spatial>

    <spatial name="rope_4" limited="true" range="0 4.235" stiffness="0" damping="0" >
      <site site="topcenter" />
      <geom geom="rotor_4_up" sidesite="top_sidesite_4" />
      <site site="top_main_site_4" />
      <site site="bot_main_site_4" />
      <geom geom="rotor_4_down" sidesite="bot_sidesite_4" />
      <site site="slider_4" />
    </spatial>
  </tendon>

  <actuator>
    <position name="slider_1_pos" joint="slider_1" ctrlrange="-4.5 4.5" kp="200" kv="80"/>
    <position name="slider_2_pos" joint="slider_2" ctrlrange="-4.5 4.5" kp="200" kv="80"/>
    <position name="slider_3_pos" joint="slider_3" ctrlrange="-4.5 4.5" kp="200" kv="80"/>
    <position name="slider_4_pos" joint="slider_4" ctrlrange="-4.5 4.5" kp="200" kv="80"/>
  </actuator>

  <actuator>
    <!-- existing 4 cable/slider actuators â€¦ -->

    <!-- Tool yaw and gripper actuators -->
    <position name="act_ee_yaw" joint="ee_yaw" kp="20" ctrlrange="-3.1416 3.1416"/>
    <!-- Drive only left finger; right finger follows via equality -->
    <position name="act_gripper" joint="finger_l" kp="200" ctrlrange="0 .03"/>
  </actuator>


  <sensor>
    <framepos objtype="camera" objname="ee_camera"/>
    <framequat objtype="camera" objname="ee_camera"/>
  </sensor>
</mujoco>